definitions:
  request.Login:
    properties:
      password:
        example: Password1@
        type: string
      username:
        example: tungsten_kitty
        type: string
    required:
    - password
    - username
    type: object
  request.NewInvitation:
    properties:
      bypassApproval:
        type: boolean
      expiresAt:
        type: string
      joinLimit:
        type: integer
    type: object
  request.NewServer:
    properties:
      name:
        example: My very good server
        maxLength: 256
        type: string
    required:
    - name
    type: object
  request.Refresh:
    properties:
      refreshToken:
        example: 9Vz6ayzM0scQSIXHtYVbKcDeF1aa0aLs
        type: string
    required:
    - refreshToken
    type: object
  request.Register:
    properties:
      email:
        example: tungstenkitty@gmail.com
        type: string
      password:
        example: Password1@
        maxLength: 72
        minLength: 8
        type: string
      username:
        example: tungsten_kitty
        type: string
    required:
    - email
    - password
    - username
    type: object
  request.UpdateInvitation:
    properties:
      bypassApproval:
        type: boolean
      joinLimit:
        type: integer
    type: object
  request.UpdateServer:
    properties:
      announcementChannel:
        type: string
      bannerUrl:
        type: string
      description:
        type: string
      iconUrl:
        type: string
      name:
        type: string
      needApproval:
        type: boolean
    type: object
  response.ErrorResponse:
    properties:
      error:
        type: string
    type: object
  response.GetInvitationResponse:
    properties:
      id:
        type: string
      server:
        $ref: '#/definitions/response.ServerPreview'
    type: object
  response.GetServerResponse:
    properties:
      bannerUrl:
        type: string
      createdAt:
        type: string
      description:
        type: string
      iconUrl:
        type: string
      id:
        type: string
      name:
        type: string
      updatedAt:
        type: string
    type: object
  response.GetServersResponse:
    properties:
      result:
        items:
          $ref: '#/definitions/response.ServerPreview'
        type: array
    type: object
  response.Invitation:
    properties:
      bypassApproval:
        type: boolean
      createdAt:
        type: string
      expiresAt:
        type: string
      id:
        type: string
      joinCount:
        type: integer
      joinLimit:
        type: integer
      serverId:
        type: string
    type: object
  response.NewServerResponse:
    properties:
      id:
        type: string
    type: object
  response.ServerPreview:
    properties:
      bannerUrl:
        type: string
      iconUrl:
        type: string
      id:
        type: string
      name:
        type: string
    type: object
  response.TokensResponse:
    properties:
      accessToken:
        type: string
      refreshToken:
        type: string
    type: object
  response.UpdateServerResponse:
    properties:
      bannerUrl:
        type: string
      createdAt:
        type: string
      description:
        type: string
      iconUrl:
        type: string
      id:
        type: string
      name:
        type: string
      updatedAt:
        type: string
    type: object
info:
  contact: {}
  description: This is the api for Noncord
  title: Noncord API
  version: "1.0"
paths:
  /api/v1/auth/login:
    post:
      consumes:
      - application/json
      description: Logging in an account without sso
      parameters:
      - description: New account data
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.Login'
      produces:
      - application/json
      responses:
        "200":
          description: Access and refresh tokens
          schema:
            $ref: '#/definitions/response.TokensResponse'
        "400":
          description: Missing field
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Wrong credential
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: SSO enabled account
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Login
      tags:
      - Auth
  /api/v1/auth/logout:
    post:
      consumes:
      - application/json
      description: Invalidate the current session
      parameters:
      - description: New account data
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.Refresh'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid payload
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Logout
      tags:
      - Auth
  /api/v1/auth/refresh:
    post:
      consumes:
      - application/json
      description: Rotate current refresh token
      parameters:
      - description: New account data
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.Refresh'
      produces:
      - application/json
      responses:
        "200":
          description: Access and refresh tokens
          schema:
            $ref: '#/definitions/response.TokensResponse'
        "400":
          description: Missing field
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Refresh
      tags:
      - Auth
  /api/v1/auth/register:
    post:
      consumes:
      - application/json
      description: Register an account
      parameters:
      - description: New account data
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.Register'
      produces:
      - application/json
      responses:
        "201":
          description: Account created
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Register an account
      tags:
      - Auth
  /api/v1/invitations/{invitation_id}:
    delete:
      description: Invalidate an invitation by invitation id
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: invite id to fetch
        in: path
        name: invitation_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid invitation id
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Cannot authenticate user
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden action
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Invitation not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Invalidate invitation
      tags:
      - Invitation
    get:
      description: Get an invitation detail by invitation id
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: invite id to fetch
        in: path
        name: invitation_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.GetInvitationResponse'
        "400":
          description: Invalid invitation id
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Invitation not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Get invitation detail
      tags:
      - Invitation
    patch:
      description: Update invitation detail by invitation id
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: invite id to fetch
        in: path
        name: invitation_id
        required: true
        type: string
      - description: payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.UpdateInvitation'
      produces:
      - application/json
      responses:
        "200":
          description: Updated invitation
          schema:
            $ref: '#/definitions/response.Invitation'
        "400":
          description: Invalid body or invalid invitation id
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Cannot authenticate user
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden action
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Invitation not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Update invitation
      tags:
      - Invitation
    put:
      description: Update invitation detail by invitation id
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: invite id to fetch
        in: path
        name: invitation_id
        required: true
        type: string
      - description: payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.UpdateInvitation'
      produces:
      - application/json
      responses:
        "200":
          description: Updated invitation
          schema:
            $ref: '#/definitions/response.Invitation'
        "400":
          description: Invalid body or invalid invitation id
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Cannot authenticate user
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden action
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Invitation not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Update invitation
      tags:
      - Invitation
  /api/v1/invitations/{invitation_id}/join:
    post:
      description: Join a server through an invitation
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: invite id to join server
        in: path
        name: invitation_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Invalid invitation id
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Invitation not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Join a server
      tags:
      - Invitation
  /api/v1/server:
    get:
      description: Get all servers the user is in
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.GetServersResponse'
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Get servers by user
      tags:
      - Server
    post:
      consumes:
      - application/json
      description: Create a server
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Data for creating server
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.NewServer'
      produces:
      - application/json
      responses:
        "200":
          description: Server id
          schema:
            $ref: '#/definitions/response.NewServerResponse'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Create a server
      tags:
      - Server
  /api/v1/server/{server_id}:
    delete:
      description: Delete server by id
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Server Id
        in: path
        name: server_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Server not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Delete server
      tags:
      - Server
    get:
      description: Get a server by id
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: server id to fetch
        in: path
        name: server_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.GetServerResponse'
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Server not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Get a server
      tags:
      - Server
    patch:
      consumes:
      - application/json
      description: Update server
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Update server
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.UpdateServer'
      - description: Server Id
        in: path
        name: server_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Updated server
          schema:
            $ref: '#/definitions/response.UpdateServerResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Server not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Update server
      tags:
      - Server
    put:
      consumes:
      - application/json
      description: Update server
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Update server
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.UpdateServer'
      - description: Server Id
        in: path
        name: server_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Updated server
          schema:
            $ref: '#/definitions/response.UpdateServerResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Server not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Update server
      tags:
      - Server
  /api/v1/server/{server_id}/invitations:
    get:
      description: Get all server's invitations
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Server Id
        in: path
        name: server_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Invitation'
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Server not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Get server's invitations
      tags:
      - Server
    post:
      description: Get an invitation on a server
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Server Id
        in: path
        name: server_id
        required: true
        type: integer
      - description: Data for creating invitation
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/request.NewInvitation'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Invitation'
        "401":
          description: Unknown session
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Server not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Create invitation
      tags:
      - Server
swagger: "2.0"
